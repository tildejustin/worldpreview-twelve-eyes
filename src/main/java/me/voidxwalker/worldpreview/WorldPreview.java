package me.voidxwalker.worldpreview;

import net.fabricmc.api.ClientModInitializer;
import net.minecraft.client.network.ClientPlayerEntity;
import net.minecraft.client.options.KeyBinding;
import net.minecraft.client.render.Camera;
import net.minecraft.client.render.WorldRenderer;
import net.minecraft.client.util.InputUtil;
import net.minecraft.client.world.ClientWorld;
import net.minecraft.text.LiteralText;
import net.minecraft.text.Text;
import net.minecraft.text.TranslatableText;
import net.minecraft.util.math.BlockPos;
import net.minecraft.world.World;
import org.apache.logging.log4j.Level;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.lwjgl.glfw.GLFW;

import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

public class WorldPreview  implements ClientModInitializer {
   public static World world;
   public static ClientPlayerEntity player;
   public static ClientWorld clientWord;
   public static boolean inPreview;
   public static BlockPos spawnPos;
   public static int kill=0;
   public static int playerSpawn;
   public static Camera camera;
   public static WorldRenderer worldRenderer;
   public static boolean existingWorld;
   public static boolean showMenu;
   public static boolean calculatedSpawn;
   public static KeyBinding resetKey;
   public static KeyBinding freezeKey;
   public static KeyBinding cycleChunkMapKey;
   public static int chunkMapPos;
   public static boolean freezePreview;
   public static final Object lock= new Object();
   public static Logger LOGGER = LogManager.getLogger();
   public static void log(Level level, String message) {
      LOGGER.log(level, message);
   }
   // just trust me
   public static Set<Long> twelve_eyes = new HashSet<>(Arrays.asList(-9197317985304189237L,-9189267337188961889L,-9171878058202665450L,-9157772904370969967L,-9094656428386782923L,-8979437824522988813L,-8962081097040628611L,-8903520115767458718L,-8884121710725064101L,-8862357845682126524L,-8752939816176316860L,-8710150186868728057L,-8675994093742164004L,-8656214163764981575L,-8609999349574415601L,-8572471352365494903L,-8543817204016761706L,-8516387338074236797L,-8419391502518637387L,-8411815362167783873L,-8402780419947459513L,-8402697058371818036L,-8376952417172607531L,-8361504258683847135L,-8338987999475176162L,-8324124204626653910L,-8306807169968203066L,-8303202016171167923L,-8251633348851780164L,-8247016210160746200L,-8238369410812489513L,-8233747021963093469L,-8225473968369237300L,-8216972923017587788L,-8175806118332105796L,-8158915829245656107L,-8131366355303590728L,-8067522852448623242L,-8061668131829130249L,-8016790557922031861L,-8008328623369027602L,-8005970730179789923L,-7824656857361598707L,-7774695772335083516L,-7720942820666909211L,-7698806105421995712L,-7684771301979924563L,-7614951271356887693L,-7570152795723508830L,-7503928396527592791L,-7486257951423011691L,-7477771708226199257L,-7476625063726316787L,-7464086646805352705L,-7391747903042163765L,-7385583287372104445L,-7370167586785607263L,-7349831961367080042L,-7292656321032151634L,-7290584124230044511L,-7270892012774299576L,-7142330695223446247L,-7110821767555049884L,-7102796376463439329L,-7071658548355288780L,-7069252825480297907L,-7042977056103994243L,-6919799331641689666L,-6905835318932221330L,-6892045144619128420L,-6867701381950154422L,-6855527884896237578L,-6849255534363229169L,-6802464600110140461L,-6754933309697704086L,-6740864229374458789L,-6726830535108099041L,-6724628392041806226L,-6650951564264710988L,-6629590753017430306L,-6627052630211814898L,-6594312270499211091L,-6525128528834567363L,-6491844316302757910L,-6476191313063184192L,-6458954633523112138L,-6406900166830234814L,-6347896705692548558L,-6326415082696836686L,-6317604925239730144L,-6311053776093923170L,-6285115187209993992L,-6241092964131815045L,-6151583460148378484L,-6093274337712808830L,-6079209634515608314L,-6068600901279665897L,-6058441627348256349L,-5999328243307148917L,-5952184405788569551L,-5902246111827766467L,-5891522753576418682L,-5858898661624638504L,-5837801281740901547L,-5831998066237960130L,-5830030030142955558L,-5811372455106547118L,-5786956344073432824L,-5782582937033929518L,-5771227489269208066L,-5675159407981231177L,-5646651138818557250L,-5600706519706875123L,-5595497960606207634L,-5554196993592644190L,-5524105329661405904L,-5521633661447450922L,-5469602774354012338L,-5446449320521381820L,-5389978352146077727L,-5372679547353202916L,-5245052663166295157L,-5220047679411112125L,-5210503305240040261L,-5201367254674239949L,-5200162601464968945L,-5189449655587174372L,-5184506869740184158L,-5181251685203755426L,-5143166590202680612L,-5137160270754640651L,-5118995660565202482L,-5032450702001839273L,-5025098861756289540L,-5015456855207400223L,-4996105431999873907L,-4990199763909908466L,-4968667269518559452L,-4962205386651714313L,-4959756802679646986L,-4928988838695436171L,-4843966368748671058L,-4819085842660920996L,-4788258049169394535L,-4778500651039874828L,-4768099960159463056L,-4710150818525141601L,-4688581557559060444L,-4654315954010060377L,-4647207698476393462L,-4591866459529368050L,-4560390317625202991L,-4536625425115941739L,-4533810898914279201L,-4501553306664990383L,-4491009044923048289L,-4479851153864978582L,-4445190237552635995L,-4439324709775223878L,-4413512107574409177L,-4403273821503377048L,-4400941627716287830L,-4387494429412067165L,-4340314074041608636L,-4330073667646254548L,-4299371888167266784L,-4274634648828202122L,-4269241087275116978L,-4256260942033893425L,-4237061538043612734L,-4216414580991905700L,-4204314922838009212L,-4174308372565919233L,-4145579204521349007L,-4136062931941165886L,-4115383477843224002L,-4104320105937681846L,-4102910746788131036L,-4095500285201644034L,-4063167405360871698L,-4053359022623158882L,-4003037677684209652L,-3990308347493832210L,-3964796374591123888L,-3956290774946350556L,-3874736204486129742L,-3874545659754295506L,-3852294313086921771L,-3812912365914958599L,-3723475235072509108L,-3721046032775327402L,-3702114849806376584L,-3690528935890982728L,-3684580709106440976L,-3682423593513391908L,-3654135387500367997L,-3642463589840594422L,-3638900147885689416L,-3638322344884643156L,-3628619236740379963L,-3583868169704304658L,-3559854415050316759L,-3533356093028227241L,-3524061350748195628L,-3519658335406540123L,-3452955076663278388L,-3422301856294376598L,-3416405463322336885L,-3311045407052933518L,-3272070273154967986L,-3267334854149779410L,-3259186414095766882L,-3246213472113384365L,-3233152523108506243L,-3162271144466639045L,-3154958165647810190L,-3116023487261709486L,-3086980367471178506L,-3083502632719822796L,-3081813915134762496L,-3066276382429299772L,-3044467857808704898L,-3030185214034972349L,-3012899642081187652L,-2945820545934910033L,-2912668512130146130L,-2824940675668200420L,-2799856318015676910L,-2769704661213419716L,-2738237196461983887L,-2723277116569895857L,-2711917826825229348L,-2709539319773359170L,-2675018523889705838L,-2583350423838663449L,-2582736820396839715L,-2560662525904064351L,-2554341351327951306L,-2525678262505891560L,-2503885785025968842L,-2484888893013624690L,-2420933240920442114L,-2360406537671593371L,-2355615359252718764L,-2335729225860498056L,-2328409344650949697L,-2328356050289884836L,-2261545138602199852L,-2249742006923558339L,-2213197841879797760L,-2210686098120015809L,-2199196470988730458L,-2187789299133683854L,-2160571779764828557L,-2123607075484620030L,-2109045146993903763L,-2083568895507405709L,-2074840301214275828L,-2063977579987762092L,-2035978363029782235L,-2017650329287640440L,-1946374583699580159L,-1907149258151347021L,-1904162059044829169L,-1810988861636997465L,-1787571520628182775L,-1763662177824452495L,-1739203034822830604L,-1723936532088667782L,-1722682817059269534L,-1718104005564266304L,-1713271608160360191L,-1704047663662193469L,-1692562609918935960L,-1667938460885587274L,-1632136208107243752L,-1631721906231117847L,-1624603682557349809L,-1615747134772729742L,-1547341236837034952L,-1474609862562882358L,-1464426395928321813L,-1436405101109132251L,-1416513138136358498L,-1401038155813196514L,-1375324207650628113L,-1334407972106545804L,-1312320618671684875L,-1267396066318232398L,-1238571959084295673L,-1179619047923298875L,-1168095046826111182L,-1167898633935363796L,-1118802006025554760L,-1116106251510491405L,-1066846227746470746L,-951242546236008554L,-950724523924842187L,-882889497169412883L,-869391437786259701L,-740091201214758590L,-737033000184519127L,-713618973335953650L,-702047174712944100L,-699963943391032648L,-643462086744199062L,-611608300414518032L,-611472129601903481L,-600888375274168141L,-567231270966229808L,-535756984016277970L,-494011247151664882L,-491943944075880894L,-480638790221031508L,-425746934644552404L,-380537678520161831L,-348358669409068571L,-261030406215370097L,-207557792154201529L,-136385592666024786L,-100627954626298380L,-93275757553019266L,-91518657105344666L,-69069791160464975L,-48610236293847465L,-39083520821271772L,-38135266336478172L,-19546284589368061L,-16673257321483873L,37185792395048935L,62040380075662681L,72518027615790060L,76286064723259715L,98472408936800652L,123623056711991326L,130752855956251544L,147801348189384066L,176145295596224386L,189446987124646475L,199847546697836484L,242636176187794075L,247810150173686185L,381109189266509982L,381619176054237277L,415845734858441436L,462588712755502959L,465906361006766242L,488508693251780867L,571895987691516654L,583902179426052652L,584431892752905381L,597735092202687513L,610810646199276432L,624554343950662862L,648086743528521013L,692615968496463561L,737323213846478242L,812937055568025586L,815011699281026126L,870778198760603474L,872962413175116510L,889093080945882935L,890075420533177988L,908414509612010970L,938790919905955180L,941364766599331169L,1025289140640834867L,1059350036079186583L,1105100718238952113L,1125075221994859554L,1173150826752787426L,1212945505546250274L,1229188509340495341L,1293687386795173880L,1445418770411331882L,1482098079896213418L,1489309970431929936L,1511114236002371008L,1519685217608300720L,1558575724151619355L,1597731556970270936L,1619307902120124581L,1655988851103097687L,1669504488400307717L,1743662927518449805L,1778928933387232723L,1787724606685968840L,1806394875444896940L,1831152938142155145L,1835292614131296048L,1842926079329542780L,1872466126414494553L,1926845787406347332L,1948210260832487736L,1962359702838205538L,2000179152103432921L,2031948699492805939L,2034913978455041631L,2093936181725201384L,2097815732975786541L,2099413509752819834L,2099506044165716894L,2101382279071121853L,2162520677060017278L,2166857715644496595L,2184653975233222437L,2193961673712863522L,2202969986737605692L,2237826828892135853L,2249948347511877025L,2264929694611539338L,2287382611514914552L,2300623469076178121L,2308159798625757665L,2335465796077334246L,2340490641634218965L,2368915527864745741L,2391005400192269325L,2394395434817035358L,2411510189772186304L,2441795666834486902L,2450264193567538078L,2453813220288242388L,2483522479586954969L,2521984758613651439L,2522399159630573011L,2572109367190208921L,2608600100584282887L,2613395103112915575L,2625633279968258532L,2660909878638943296L,2708824806658017710L,2710089604622286954L,2720059804633756884L,2729152665350927223L,2751672295263381496L,2800168101785437612L,2815138574172948665L,2827772374235956582L,2837167143869612328L,2860299551214956959L,2898370143628834293L,2909640232674517228L,2944749021544179757L,2961670172028231444L,2974834099293822663L,2982058172490903131L,3019351672809750238L,3038270426467957245L,3062236378642081125L,3063448825088448542L,3068918688444229008L,3069387852056200482L,3115025757856773148L,3163673373153292701L,3167408189603273912L,3205208953482278581L,3223181682605048578L,3294856393657852741L,3313274274248191077L,3345213776840211662L,3358135951810496104L,3374990461301664513L,3419332269030753807L,3437449409161694749L,3494382588328455013L,3555730572378924143L,3573045921336785079L,3574996193962697020L,3621583144372372520L,3688936311060223070L,3756203683674802808L,3764845241150712669L,3774061236183711082L,3796031115365919812L,3802162324253519190L,3822525375242015152L,3826893502180963674L,3909115528890091146L,3991134966863008487L,4029148763136004014L,4064252565454893813L,4070870473577257902L,4106198560131112668L,4114444605944396479L,4163012828749813816L,4203037407912000348L,4232009109036807108L,4239701304318597294L,4253060919579189618L,4326949162152401309L,4369919481909751573L,4405911225237782588L,4474508110893563020L,4534918094392997654L,4562169643546599664L,4606773917592038769L,4618469786586067825L,4622931345839970533L,4668979523675179902L,4706518110077457838L,4740847899824525762L,4767251805026375521L,4767463864881650011L,4767686697568513824L,4823410004362491375L,4855619230673065987L,4887406809228016113L,4907926925835165202L,4910332594882349935L,4946165316503118699L,4973014341263015700L,4989962120679942700L,5016791578069915669L,5044566240718236508L,5059204554322964954L,5061224982030787384L,5061517106562152883L,5063229169965815283L,5073583067787265497L,5108082008065777211L,5128468872590586397L,5169509634268588781L,5171442607566554736L,5178305038226576864L,5188274604232879544L,5216694417237841848L,5296087267082035806L,5299951759406213775L,5309962128356527199L,5311261164379572415L,5436356887794670819L,5518944329676070764L,5550762311826553148L,5582842672357740808L,5627685366286749016L,5644027274030121346L,5662866010571314330L,5679438222034842095L,5691643457792423047L,5700643246222526042L,5752639299336009820L,5767101471761295679L,5783776116141158232L,5822020256530238428L,5868933042455633498L,5936691436572135508L,5952637656742486245L,5985820558579785632L,5994425261853424417L,6030745065532049138L,6072614343151855428L,6073509420717686438L,6092331933948152190L,6164480390559141637L,6224770029994074922L,6254454115560557246L,6322353770873287333L,6383443488600969144L,6385615442869777492L,6388058728524920995L,6462354475222243294L,6476873529715005654L,6496392715300416173L,6515067837902916586L,6527776844169743720L,6532052778070084990L,6547370198952003934L,6609961237599325538L,6621246825695826116L,6700059680114196065L,6767502866698415010L,6773154133333667938L,6779773408357429511L,6796383568547116030L,6798545979904433212L,6819708988953807126L,6835259695615814719L,6887340364183692561L,6902535270527212191L,6909842937631620884L,6928561249814550638L,6952580646591933858L,6970879847601750438L,6992151487398291152L,7028704749216445196L,7057372023786739408L,7108867339627672198L,7131867730866246076L,7144247238776371709L,7203822459656492113L,7204451787050918904L,7256526930832235739L,7319321732170825323L,7333771266059469335L,7338280443035369352L,7355913013660192963L,7374310509894251782L,7407963438941642026L,7417237157076034500L,7426380253954493939L,7436799001348727683L,7477807340494543797L,7580295453081476483L,7603180816803200182L,7624344313517840423L,7634863382549673200L,7644252945664698752L,7712001382821596191L,7715650414217668571L,7733595485168827267L,7738677680025114992L,7753447311668734449L,7789586320481525197L,7794375888406837219L,7797644762210872232L,7847083442062599819L,7867572313795321310L,7880689760620674980L,7891610723234045990L,7904350584475184180L,7953309392231931891L,7980053937845182195L,7997912534835069531L,7998944021784475540L,8053402301267656544L,8144301003278847292L,8160841913775277786L,8169152955473067438L,8200142571320361316L,8210483326219870406L,8271695599891661092L,8303575363633525072L,8318708905490730759L,8338465498461846727L,8340202500273351453L,8350622978131343131L,8361440187632054212L,8379764857796978666L,8389574210303661815L,8399484484128289794L,8409321283458057173L,8410313654893427354L,8457989986245880644L,8477555373963313825L,8478338994699367704L,8504182478020399416L,8522382911436370951L,8525462448156861903L,8565636249030695388L,8646931717698819340L,8672577297925215934L,8701615056298629753L,8745785382817094719L,8753970872496315979L,8756468760629410931L,8759845379484746766L,8823477525009912990L,8864951885302107237L,8886386567011778596L,8897219665902238467L,8903827970568881619L,8949000297146526492L,8976773216088893700L,8979816944214361583L,8999528475672865386L,9003963365432659439L,9009894461512845357L,9013742642433857896L,9082110561262480214L,9113698334112056273L,9134294382622618581L,9162925681303991772L,9212264069077365281L,9221461199508612825L));


   public void onInitializeClient() {
      resetKey = KeyBindingHelper.registerKeyBinding(new KeyBinding(
              this.translate("key.world_preview.reset","Leave Preview").getString(),
              InputUtil.Type.KEYSYM,
              GLFW.GLFW_KEY_H,
              this.translate("key.categories.world_preview","World Preview").getString()
      ));

      freezeKey = KeyBindingHelper.registerKeyBinding(new KeyBinding(
              this.translate("key.world_preview.freeze","Freeze Preview").getString(),
              InputUtil.Type.KEYSYM,
              GLFW.GLFW_KEY_J,
              this.translate("key.categories.world_preview","World Preview").getString()
      ));
      cycleChunkMapKey = KeyBindingHelper.registerKeyBinding(new KeyBinding(
              this.translate("key.world_preview.cycle_chunkmap","Cycle ChunkMap Positions").getString(),
              InputUtil.Type.KEYSYM,
              GLFW.GLFW_KEY_K,
              this.translate("key.categories.world_preview","World Preview").getString()

      ));
   }
   public Text translate(String key, String replacement ){
      Text t = new TranslatableText(key);
      if(t.getString().equals(key)){
         return new LiteralText(replacement);
      }
      return t;
   }

}
